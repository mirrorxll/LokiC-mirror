import consumer from "./consumer";

$(document).on('turbolinks:load', function () {
    let report_tracking_hour = $('#report_tracking_hour');

    if(!report_tracking_hour.length) return false;

    consumer.subscriptions.create("ImportTrackingReportChannel", {
        connected() { console.log('connect'); },
        disconnected() { console.log('disconnected'); },
        received(data) {
            console.log(data);
            update(data)
        }
    });

    function update(data) {
        if (data) {
            $.ajax({
                url: `${window.location.origin}/tracking_hours?week=${data.first.week}`,
                dataType: 'script'
            })
        }
    }

});

