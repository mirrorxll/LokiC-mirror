%div{ id: "dataSet", data_set_id: @data_set.id }

%hr/
#dataSetName.text-center
  =link_to("##{@data_set.id} #{@data_set.name}", @data_set)
%hr.mb-0/

.d-flex.justify-content-between.align-items-center.small
  .text-secondary
    created by #{@data_set.account.name}
  .text-secondary
    created at: #{@data_set.created_at}#{@data_set.updated_early? ? " | updated at: #{@data_set.updated_at}" : ""}

#dataSetInfo.row.align-items-stretch.mt-4
  .col-xl-8.col-sm-12
    .card.h-100
      .card-header.p-1.small
        .d-flex.justify-content-between.align-items-center
          MAIN INFO
          #dataSetStatusComment
            =render 'status_comment'
          .d-flex.align-items-center
            -if @permissions['edit_form']
              #editDataSet
                %button{ type: 'button', class: 'p-0 btn btn-sm btn-link', 'data-toggle' => "modal", 'data-target' => "#updateDataSetModal" }
                  [ edit ]
            -if @permissions['status'].values.any?
              #dataSetStatus.d-inline-block
                -if @permissions['status']['edit_form']
                  =render 'statuses'
                -elsif @permissions['status']['show']
                  =@data_set.status.name
      .card-body
        =render 'data_set_info'
  .col-xl-4.col-sm-12.pl-xl-0
    .card.h-100
      .card-header.p-1.small
        .d-flex.justify-content-between.align-items-center
          .label
            TABLE LOCATIONS
            =link_to('[ show ]', '#', class: 'pl-1', "data-target" => "#dataSamplesModal", "data-toggle" => "modal")
          =link_to('[ edit ]', edit_data_set_table_locations_path(@data_set),
                   class: 'p-0 btn btn-sm btn-link edit-table-locations-button', remote: true)
      .card-body
        =render 'data_sets/table_locations/table_locations'

-if @permissions['edit_form']
  #updateDataSetModal.modal.fade.pr-0{ "aria-hidden" => "true", "aria-labelledby" => "updateDataSetModal",
                                           'data-backdrop' => 'static', "data-keyboard" => "false" }
    .modal-dialog.modal-dialog-scrollable.modal-lg
      .modal-content
        .modal-header
          UPDATE DATA SET
          %button.close{ "aria-label" => "Close", "data-dismiss" => "modal", type: "button" }
            %span{ "aria-hidden" => "true" } Ã—
        .modal-body.small
          =render 'edit'
        .modal-footer.justify-content-center
          =link_to('UPDATE', '#', id: 'updateDataSetButton', class: 'btn btn-sm btn-dark')
          .btn.btn-sm.btn-outline-secondary{ "aria-label" => "Close", "data-dismiss" => "modal", type: "button" }
            CANCEL

  :javascript
    document.querySelector('#updateDataSetButton').addEventListener('click', (event) => {
      event.preventDefault();
      document.querySelector('#hiddenUpdateDataSetButton').click();
    }, false);
