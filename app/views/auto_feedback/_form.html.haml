.small
  -auto_feedback.each do |fb|
    .row
      .col-1{class: "confirm_#{fb.id} text-center", onchange: 'confirmAutoFeedback(this.className);'}
        -if fb.confirmed
          =icon('fas','check')
        -else
          =check_box_tag :auto_feedback_confirm, fb.confirmed
      -fb.auto_feedback.output.each do |rule, output|
        .col-2.p-0
          =rule
        .col-9
          =output
    .row
      .col-6.offset-3
        %hr

:javascript
  function confirmAutoFeedback(elem) {
    let storyType = $('#story_type')
    let storyTypeId = storyType.attr('story_type_id');
    let storyTypeIterId = storyType.attr('iteration_id')

    let feedback = document.getElementsByClassName(elem)[0];
    let feedbackConfirmId = elem.split(' ').find((className) => className.match(/confirm/) ).split('_')[1]

    let changeAutoFeedbackStatus = (elem) => {
      elem.innerHTML = `<i class="fas fa-check"></i>`;
    }

    $.ajax({
      url: `${storyTypeId}/iterations/${storyTypeIterId}/auto_feedback_confirmations/${feedbackConfirmId}/confirm`,
      success: changeAutoFeedbackStatus(feedback),
      method: 'patch'
    })
  }
