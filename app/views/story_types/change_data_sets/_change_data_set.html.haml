.current_data_set
  =link_to(@story_type.data_set.name, @story_type.data_set)
  =link_to('x', '#')
.change_data_set_form.d-none
  =form_with(url: story_type_change_data_set_path(@story_type), method: :patch, html: { onchange: "Rails.fire(this, 'submit')"}) do |f|
    =f.collection_select 'story_type[data_set_id]', DataSet.order(name: :asc), :id, :name, selected: @story_type.data_set.id
    =f.hidden_field 'current_data_set_page_id'

:javascript
  (() => {
    document.querySelector('#current_data_set_page_id').value = $('#data_set').attr('data_set_id');
  })();

  document.querySelector('.current_data_set a[href="#"]').addEventListener('click', function (evt) {
    evt.preventDefault();
    evt.target.parentNode.classList.add('d-none');
    document.getElementsByClassName('change_data_set_form')[0].classList.remove('d-none');
    return false;
  })
