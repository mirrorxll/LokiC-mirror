%div{ id: "story_type", story_type_id: @story_type.id, iteration_id: @iteration.id }

%hr
.row
  .col-12.text-center
    #story_type_name
      %b ##{@story_type.id} #{@story_type.name}
%hr/

%nav{ 'area-label' => 'breadcrumb' }
  %ov.breadcrumb
    %li.breadcrumb-item
      =link_to('home', root_url)
    %li.breadcrumb-item.active{ 'area-current' => 'page' }
      story type
%hr/

.row
  .col-10
    #story_type_iterations
      =render @story_type.iterations

      .badge.badge-pill.badge-light{'data-container' => 'body',
                                   'data-toggle' => 'popover',
                                   'data-placement' => 'top',
                                   'data-html' => 'true',
                                   'data-content' => "#{render 'iterations/new_form'}" }
        new iteration
  .col-2.text-right
    #story_type_status
      =render @iteration.statuses.first
%hr/

#story_type_template.accordion
  .card
    .card-header
      %div.text-center{"aria-controls" => "#template", "aria-expanded" => "true", "data-target" => "#template", "data-toggle" => "collapse", type: "button"}
        template
    #template.collapse.show{"data-parent" => "#story_type_template"}
      .card-body.small
        =render 'story_types/show_template'

#story_type_properties.accordion
  .card
    .card-header
      %div.text-center{"aria-controls" => "#properties", "aria-expanded" => "false", "data-target" => "#properties", "data-toggle" => "collapse", type: "button"}
        properties
    #properties.collapse.show{"data-parent" => "#story_type_properties"}
      .card-body
        =render 'story_types/properties'

#story_type_staging_table.accordion
  .card
    .card-header
      %div.text-center{"aria-controls" => "#staging_table", "aria-expanded" => "false", "data-target" => "#staging_table", "data-toggle" => "collapse", type: "button"}
        staging table
    #staging_table.collapse.show{"data-parent" => "#story_type_staging_table"}
      .flash
      .card-body
        -if @story_type.staging_table
          =render @story_type.staging_table
        -else
          =render 'staging_tables/form'

#story_type_code.accordion
  .card
    .card-header
      %div.text-center{"aria-controls" => "#codes", "aria-expanded" => "false", "data-target" => "#code", "data-toggle" => "collapse", type: "button"}
        code
    #code.collapse.show{"data-parent" => "#story_type_code"}
      .flash
      .card-body
        =render 'codes/section'
  =render 'codes/modal_ruby_code'

#story_type_export_configs.accordion
  .card
    .card-header
      %div.text-center{"aria-controls" => "#export_configs", "aria-expanded" => "false", "data-target" => "#export_configs", "data-toggle" => "collapse", type: "button"}
        export configurations
    #export_configs.collapse.show{"data-parent" => "#story_type_export_configs"}
      .flash
      .card-body
        -if @story_type.iteration.population
          =render 'export_configurations/export_configurations'

%div.accordion{id: "story_type_samples_#{@iteration.id}"}
  .card
    .card-header
      %div.text-center{"aria-controls" => "#samles", "aria-expanded" => "false", "data-target" => "#samples", "data-toggle" => "collapse", type: "button"}
        samples (iteration: #{@iteration.name})
    #samples.collapse.show{"data-parent" => "#story_type_samples_#{@iteration.id}"}
      .flash
      .card-body
        -if @story_type.iteration.export_configurations
          =render 'samples/samples'

%div.accordion{id: "story_type_scheduler_#{@iteration.id}"}
  .card
    .card-header
      %div.text-center{"aria-controls" => "#scheduler", "aria-expanded" => "false", "data-target" => "#scheduler", "data-toggle" => "collapse", type: "button"}
        scheduler (iteration: #{@iteration.name})
    #scheduler.collapse.show{"data-parent" => "#story_type_scheduler_#{@iteration.id}"}
      .flash
      .card-body
        -if @story_type.iteration.creation
          =render 'schedules/scheduler'

%div.accordion{id: "story_type_export_#{@iteration.id}"}
  .card
    .card-header
      %div.text-center{"aria-controls" => "#export", "aria-expanded" => "false", "data-target" => "#export", "data-toggle" => "collapse", type: "button"}
        export (iteration: #{@iteration.name})
    #export.collapse.show{"data-parent" => "#story_type_export_#{@iteration.id}"}
      .card-body
        -if @story_type.iteration.schedule
          =render 'exports/export'

%hr.mb-5/
