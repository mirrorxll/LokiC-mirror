%hr
#story_type_name
  %b #{@story_type.name}
%hr
#story_type_template.accordion
  .card
    .card-header
      %div.text-center{"aria-controls" => "#template", "aria-expanded" => "true", "data-target" => "#template", "data-toggle" => "collapse", :type => "button"}
        template
    #template.collapse.show{"data-parent" => "#story_type_template"}
      .card-body.small
        =render 'story_types/show_template'

#story_type_properties.accordion
  .card
    .card-header
      %div.text-center{"aria-controls" => "#properties", "aria-expanded" => "false", "data-target" => "#properties", "data-toggle" => "collapse", :type => "button"}
        properties
    #properties.collapse{"data-parent" => "#story_type_properties"}
      .card-body
        =render 'story_types/properties'

#story_type_staging_table.accordion
  .card
    .card-header
      %div.text-center{"aria-controls" => "#staging_table", "aria-expanded" => "false", "data-target" => "#staging_table", "data-toggle" => "collapse", :type => "button"}
        staging table
    #staging_table.collapse{"data-parent" => "#story_type_staging_table"}
      .card-body
        -if @story_type.staging_table.nil?
          =render 'staging_tables/form'
        -else
          =render @story_type.staging_table

#story_type_code.accordion
  .card
    .card-header
      %div.text-center{"aria-controls" => "#code", "aria-expanded" => "false", "data-target" => "#code", "data-toggle" => "collapse", :type => "button"}
        code
    #code.collapse{"data-parent" => "#story_type_code"}
      .card-body
        -if @story_type.code.attached?
          =render 'code/story_type_code'
        -else
          =render 'code/form'
        -if @story_type.code.attached?
          =render 'code/execute'
