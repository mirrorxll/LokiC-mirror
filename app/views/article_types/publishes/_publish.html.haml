-if @iteration.creation
  -articles = @iteration.articles
  -published = articles.published.count
  -ready_to_publish = articles.not_published.count

  -if !@article_type.iteration.eql?(@iteration)
    .row
      .col-10.offset-1
        total published: #{published} / #{articles.count}
  -elsif @article_type.staging_table && @iteration.creation
    -if @iteration.export.eql?(true) && !@iteration.purge_export.eql?(true)
      .row
        .col-10.offset-1
          total published: #{published} / #{articles.count}
      .row
        .col-10.offset-1
          -if published < articles.count
            =link_to('extra export!', execute_article_type_iteration_exports_path(@article_type, @iteration),
                     class: 'mt-3 btn btn-sm btn-outline-dark',
                     method: :post, remote: true)
            .ml-3.d-inline-block
          =link_to('exported factoids', articles_article_type_iteration_exports_url(@article_type, @iteration),
                   class: 'd-inline-block mr-3 mt-3 btn btn-sm btn-outline-dark', target: '_blank')
      -if published > 0
        .row
          .col-5.offset-1.mt-3
            =link_to('remove factoids from limpar',
                     remove_exported_articles_article_type_iteration_exports_path(@article_type, @iteration),
                     method: :delete, remote: true, data: { confirm: 'Are you sure?' },
                     class: 'mt-3 btn btn-sm btn-outline-danger')
    -elsif @iteration.export.eql?(false)
      =render 'article_types/spinner', description: 'publish in progress'
    -elsif @iteration.purge_export.eql?(true)
      =render 'article_types/spinner', description: 'removing from Limpar in progress'
    -else
      .row.mb-2
        .col-10.offset-1
          ready to publish: #{ready_to_publish}
      .row
        .col-10.offset-1
          =link_to('export!', execute_article_type_iteration_exports_path(@article_type, @iteration),
                  class: 'mt-3 mr-3 btn btn-sm btn-outline-dark',
                  method: :post, remote: true)
          -if published > 0
            =link_to('remove factoids from limpar',
                     remove_exported_articles_article_type_iteration_exports_path(@article_type, @iteration),
                     method: :delete, remote: true, data: { confirm: 'Are you sure?' }, class: 'mt-3 btn btn-sm btn-outline-danger')
