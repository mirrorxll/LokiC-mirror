:javascript
  var editable_block = $('#columns-editable');
  $('#add-column').click(function () {
    let hex = secureRandom(6);

    $(editable_block).append(
        `<div id="col_${hex}">
            <div id="rm_col_${hex}" class="d-inline-block" onclick="removeColumnAndSaveEnum(this)">-</div>
            <input type="text" name="staging_table[${hex}[name]]" id="staging_table_${hex}_name" required>
            <select name="staging_table[${hex}[type]]" id="staging_table_${hex}_type" onchange="optionsForColumnType(this)">
                <option value="smallint">smallint</option>
                <option value="integer">integer</option>
                <option value="bigint">bigint</option>
                <option value="float">float</option>
                <option value="decimal">decimal</option>
                <option value="date">date</option>
                <option value="time">time</option>
                <option value="datetime">datetime</option>
                <option value="string">string</option>
                <option value="text">text</option>
                <option value="mediumtext">mediumtext</option>
                <option value="longtext">longtext</option>
                <option value="boolean">boolean</option>
            </select>
        </div>`
    );
  });

  function secureRandom(n){
    var result = '';
    while (n--){
      result += Math.floor(Math.random()*16).toString(16);
    }

    return result;
  }

  function removeColumnAndSaveEnum(elem) {
    $(elem.parentNode).remove();
  }

  function optionsForColumnType(elem) {
    let count = elem.selectedIndex + 1;
    let parent = elem.parentNode;
    let hex = parent.id.split('_')[1]
    while (parent.childElementCount > 3)
      $(elem).next().remove();

    switch (elem.options[elem.selectedIndex].value) {
      case 'decimal':
        $(parent).append(`
          <input placeholder="precision" type="text"
            name="staging_table[${hex}[opts[precision]]]" id="staging_table_${hex}_opts_precision">
          <input placeholder="scale" type="text"
            name="staging_table[${hex}[opts[scale]]]" id="staging_table_${hex}_opts_scale">`);
        break;
      case 'string':
        $(parent).append(`
          <input placeholder="limit" type="text"
            name="staging_table[${hex}[opts[limit]]]" id="staging_table_${hex}_opts_limit">
        `);
        break;
    }
  }

  $('div[id^="rm_col"]').each(function() {
    $(this).click(removeColumnAndSaveEnum)
  });

  $('select[id$="type"]').each(function() {
    $(this).click('optionsForColumnType(this)')
  });
