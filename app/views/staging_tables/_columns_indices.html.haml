.d-inline-block
  Table name:
  =@story_type.reload.staging_table.name
.btn-group.ml-2
  =link_to('sync', sync_story_type_staging_table_path(@story_type),
            class: 'btn btn-sm btn-outline-dark', method: :put, remote: true)
.btn-group.ml-2
  =link_to('truncate', truncate_story_type_staging_table_path(@story_type),
            class: 'btn btn-sm btn-outline-danger', method: :put,  remote: true)
  =link_to('detach', detach_story_type_staging_table_path(@story_type),
            class: 'btn btn-sm btn-outline-danger', method: :delete, remote: true)
  =link_to('drop', story_type_staging_table_path(@story_type),
            class: 'btn btn-sm btn-outline-danger', method: :delete, remote: true)

%hr/
.row
  #staging_table_columns.col-6.border-right
    .btn-group.mb-2
      =link_to('edit column list',
               edit_story_type_staging_table_columns_path(@story_type),
               class: 'btn btn-sm btn-outline-dark', remote: true)
    -columns = @story_type.staging_table.columns.list
    -columns.each do |_id, col|
      %p
        ="#{col[:name]}: #{col[:type]}#{col[:opts].values.all?(nil) ? '' : "(#{col[:opts].values.compact.join(',')})"}"

  #staging_table_index.col-6.border-left
    .btn-group.mb-2
      -if @story_type.staging_table.index.list.empty?
        =link_to("add 'story per publication' index",
                 new_story_type_staging_table_index_path(@story_type),
                 class: "btn btn-sm btn-outline-dark #{columns.empty? ? 'disabled': ''}", remote: true)
      -else
        =link_to("drop 'story per publication' index",
                 story_type_staging_table_index_path(@story_type),
                 class: 'btn btn-sm btn-outline-dark', method: :delete, remote: true)
    -@story_type.staging_table.index.list.each do |column|
      %p
        =column
